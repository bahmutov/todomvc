{"version":3,"sources":["js/todoModel.js"],"names":["app","Utils","TodoModel","key","todos","store","onChanges","prototype","subscribe","onChange","push","inform","forEach","cb","addTodo","title","concat","id","uuid","completed","toggleAll","checked","map","todo","extend","toggle","todoToToggle","destroy","filter","candidate","save","todoToSave","text","clearCompleted"],"mappings":"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","file":"todoModel.320197db.map","sourceRoot":"..","sourcesContent":["/*jshint quotmark:false */\n/*jshint white:false */\n/*jshint trailing:false */\n/*jshint newcap:false */\nvar app = app || {};\n\n(function () {\n\t'use strict';\n\n\tvar Utils = app.Utils;\n\t// Generic \"model\" object. You can use whatever\n\t// framework you want. For this application it\n\t// may not even be worth separating this logic\n\t// out, but we do this to demonstrate one way to\n\t// separate out parts of your application.\n\tapp.TodoModel = function (key) {\n\t\tthis.key = key;\n\t\tthis.todos = Utils.store(key);\n\t\tthis.onChanges = [];\n\t};\n\n\tapp.TodoModel.prototype.subscribe = function (onChange) {\n\t\tthis.onChanges.push(onChange);\n\t};\n\n\tapp.TodoModel.prototype.inform = function () {\n\t\tUtils.store(this.key, this.todos);\n\t\tthis.onChanges.forEach(function (cb) { cb(); });\n\t};\n\n\tapp.TodoModel.prototype.addTodo = function (title) {\n\t\tthis.todos = this.todos.concat({\n\t\t\tid: Utils.uuid(),\n\t\t\ttitle: title,\n\t\t\tcompleted: false\n\t\t});\n\n\t\tthis.inform();\n\t};\n\n\tapp.TodoModel.prototype.toggleAll = function (checked) {\n\t\t// Note: it's usually better to use immutable data structures since they're\n\t\t// easier to reason about and React works very well with them. That's why\n\t\t// we use map() and filter() everywhere instead of mutating the array or\n\t\t// todo items themselves.\n\t\tthis.todos = this.todos.map(function (todo) {\n\t\t\treturn Utils.extend({}, todo, {completed: checked});\n\t\t});\n\n\t\tthis.inform();\n\t};\n\n\tapp.TodoModel.prototype.toggle = function (todoToToggle) {\n\t\tthis.todos = this.todos.map(function (todo) {\n\t\t\treturn todo !== todoToToggle ?\n\t\t\t\ttodo :\n\t\t\t\tUtils.extend({}, todo, {completed: !todo.completed});\n\t\t});\n\n\t\tthis.inform();\n\t};\n\n\tapp.TodoModel.prototype.destroy = function (todo) {\n\t\tthis.todos = this.todos.filter(function (candidate) {\n\t\t\treturn candidate !== todo;\n\t\t});\n\n\t\tthis.inform();\n\t};\n\n\tapp.TodoModel.prototype.save = function (todoToSave, text) {\n\t\tthis.todos = this.todos.map(function (todo) {\n\t\t\treturn todo !== todoToSave ? todo : Utils.extend({}, todo, {title: text});\n\t\t});\n\n\t\tthis.inform();\n\t};\n\n\tapp.TodoModel.prototype.clearCompleted = function () {\n\t\tthis.todos = this.todos.filter(function (todo) {\n\t\t\treturn !todo.completed;\n\t\t});\n\n\t\tthis.inform();\n\t};\n\n})();\n"]}